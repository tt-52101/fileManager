<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./res/bootstrap-3.3.7-dist/css/bootstrap.min.css" type="text/css">
     <link rel="stylesheet" href="./css/login.css" type="text/css">
    <script src="js/jquery-3.3.1.min.js"></script>
    <script>

        function sbmt() {
            $.ajax({
                type: "POST",//方法类型
                dataType: "json",//预期服务器返回的数据类型
                url: "/login",//url
                data: JSON.stringify($("form").serializeObject()),
                contentType: "application/json",
                async: false,
                success: function (result) {

                    if (result == null) {

                        alert("用户名或密码错误，请重新登陆");
                        window.location.href = "/fm/login.html";
                        return false;
                    }
                    else {                       
                        if (result.type == "1") {
                            window.location.href = "/fm/list.html";
                           return false;
                        }
                        if (result.type == "0") {
                            window.location.href = "/fm/allusers.html";
                            return false;
                        }
                    }

                }
            });
        }

        $.fn.serializeObject = function () {
            var o = {};
            var a = this.serializeArray();
            
            $.each(a, function () {
                if (o[this.name] !== undefined) {
                    if (!o[this.name].push) {
                        o[this.name] = [o[this.name]];
                    }
                    o[this.name].push(this.value || '');
                } else {
                    o[this.name] = this.value || '';
                    if(this.name == "remember" && o[this.name] == "on")
                    {
                    	o[this.name] = true || '';
                    }
                }
            });
           if(o["remember"] == undefined)
        	{
        	   o["remember"] =false;
        	}
            return o;
        };

    </script>
</head>

<body >

 <div class="container">
        <div class="card card-container">      
            <img id="profile-img" class="profile-img-card" src="//ssl.gstatic.com/accounts/ui/avatar_2x.png" />
            <p id="profile-name" class="profile-name-card"></p>
            <form class="form-signin">              
                <input type="text" class="form-control" id="userName" name="userName" placeholder="请输入用户名"  required autofocus>
                <input type="password" id="password" name="password" class="form-control" placeholder="请输入密码" required>
                <div  class="checkbox">
                    <label>
                        <input type="checkbox" name="remember"> Remember me
                    </label>
                </div>
                <input type="button" class="btn btn-lg btn-primary btn-block btn-signin"  onclick="sbmt()" value="Sign in"></input>
            </form><!-- /form -->          
        </div><!-- /card-container -->
    </div><!-- /container -->
</body>
</html>